　 　 CNET 科技 资讯网   4 月 29 日   北京 消息 ： 被 业界 称为 “ 中国 Java 第一 人 ” 的 金蝶 中间件 首席 科学家 袁红岗 认为 ， Java   EE   5.0   来得 并 不晚 ， 可能 是 J2EE 诞生 以来 比较 重量级 的 一次 震撼 。 　 　 在 中国 Java 技术 界 ， 袁红岗 是 一个 不能 忽视 的 名字 。 他 的 观点 ， 及 对 中间件 趋势 的 看法 ， 是 很多 人 感兴趣 的 。 日前 ， 在 金蝶 Apusic 于 广州 花园酒店 举办 的 “ Java 俱乐部 ” 上 ， 记者 和 这位 极少 露面 的 金蝶 中间件 首席 科学家 就 集群 、 Java   EE5 . 0 等 热门话题 展开 了 直率 的 深入 对话 。 果然 ， 袁红岗 出语 惊人 ， 带来 了 很多 独特 的 视角 和 精彩 的 观点 。 　 　 记者 ： 不管 是 一般 的 技术 观点 ， 还是 在 平时 打单 过程 中 ， 我们 似乎 可以 感觉 到 ， 集群 功能 一直 是 国外 中间件 厂商 攻击 国内 中间件 的 弱点 。 而据 我们 所知 ， 你们 金蝶 中间件 在 去年 下半年 推出 了 自己 的 集群 功能 ， 并且 在 宣传 中 提及 ， 在 国家 质检 总局 全 行业 这个 大单 中 和 几个 主要 国外 产品 同等 测试 ， 测试 结果 甚至 排 在 前面 ， 这 是否 表示 Apusic 的 集群 功能 已经 能 满足 客户 的 需求 ？ 你 对 集群 功能 又 怎么 看 ， 你 认为 中 J2EE 集群 的 本质 是 什么 ？ 　 　 袁红岗 ： 首先 我 可以 向 你 证实 ， 在 国家 质检 总局 的 核心 电子 业务 系统 “ 大通关 ” 项目 中 ， 金蝶 Apusic 中间件 与 三家 世界 主要 中间件 厂商 的 产品 ， 在 同一 平台 和 环境 下用 国际 测试工具 进行 了 全方位 的 性能 测试 ， 经过 三轮 严苛 的 点对点 、 兼容性 和 性能 测试 ， 结果 我们 成功 夺标 。 在 测试 结果 中 ， Apusic 在 集群 性能 上 并 不 逊色 国外同类 产品 。 　 　 集群 是 中间件 厂商 经常 热 捧 的 一个 概念 ， 说 只有 采取 集群 策略 你 的 应用 系统 的 性能 才能 提高 。 不明 就 里 的 用户 在 付出 了 数倍 的 价钱 去 购买 集群 设备 和 软件 以后 ， 却 往往 得不到 所 应该 得到 的 效果 。 　 　 Apusic 作为 一家 负责 任 的 公司 ， 应当 向 大家 来 澄清 所谓 的 “ 集群 悖论 ” 。 所谓 集群 ， 只有 在 细粒度 计算 中其 效果 才 会 明显 ， 也 就是 将 计算 过程 以 一定 的 并行算法 进行 细分 ， 将 计算 分布 到 多个 处理机 运行 ， 最后 再 将 计算结果 合并 。 有 一个 很 有名 计划 叫做 SETI @ home ， 是 一项 利用 全球 联网 的 闲置 计算机 共同 搜索 地外 文明 的 科学实验 计划 ， 只 需要 下载 一个 小 程序 就 可以 对 从 射点 望远镜 得到 数据 进行 分析 。 这 就是 一个 典型 的 细粒度 计算 ， 所有 的 参与 计划 的 计算机 并行 地 计算 浩如烟海 的 庞大 数据库 中 的 一小 段 数据 ， 再 将 计算 的 结果 汇总 ， 从而 发现 可能 的 智能 信号 。 　 　 而 反过来 我们 看到 在 J2EE 应用 中 大多数 计算 都 是 粗粒度 的 ， 再 加上 事务处理 需要 在 分布式计算 中 进行 协调 ， 更 降低 了 集群 的 整体 处理 能力 。 因此 集群 并 不是 解决 性能 问题 的 最佳 途径 ， 在 单机 低 并发 的 情况 下 如果 你 认为 性能 不 理想 ， 那么 请 不要 指望 集群 能 给 你 带来 性能 的 提升 ， 相反 你 会 发现 性能 反而 还会 有所 下降 。 　 　 那么 ， 集群 仅 是 厂商 宣传 的 噱头 吗 ？ 在 以下 两种 情况 下 集群 是 有用 的 ： 　 　 1 .   高 并发 超负荷 运行 的 主机 ， 例如 google 这样 的 网站 ， 它 的 访问量 是 相当 大 的 ， 因此 google 会 采取 集群 策略 来 分散 客户 的 请求 ， 以 提高 整体 响应 能力 。 我们 接触 的 很多 J2EE 应用 负荷量 都 不大 ， 其实 每秒 访问量 在 500 以下 的 应用 都 没有 必要 采取 集群 策略 。 　 　 2 .   失效 转移 ， 其实 我 认为 这才 是 集群 真正 有用 的 地方 ， 使用 一台 低成本 计算 设备 作为 主 设备 的 备份 ， 在 主 设备 发生 故障 时 及时 接替 ， 以 保证 7x24 小时 不间断 服务 。 综上所述 ， 在 准备 采用 集群 之前 ， 一定 要 仔细分析 具体 的 应用环境 ， 以 避免 不必要 的 浪费 。 　 　 作为 一种 选择 ， Apusic 同样 实现 了 集群 技术 ， 但 我们 并 没有 沿用 大多数 应用服务器 厂商 所 采取 的 内存 复制技术 （ in - memory   replication ） ， 我们 知道 在 集群 中 需要 在 各 结点 之间 同步 一些 状态 信息 ， 如果 采用 内存 复制技术 ， 将 耗费 大量 的 网络带宽 ， 对 性能 也 有 很大 影响 。 这 是因为 每当 一个 结点 的 状态 发生变化 时 ， 都 需要 通过 多播 等 方式 向 其他 结点 传递 状态 信息 ， 随着 集群 内部 结点 的 增多 ， 内存 复制 将会 非常 频繁 ， 从而 造成 广播 风暴 ， 严重 阻塞 带宽 。 Apusic 所 采取 的 技术 是 客户端 缓存 ， 即 直接 将 状态 信息 保存 在 客户端 ， 当 服务器 失效 时 将 状态 转移 到 可用 服务器 。 　 　 记者 ： 其实 直到现在 ， 还有 人 对 中国 人能 做出 中间件 不 相信 、 对 产品 不 信任 。 你 在 去年 曾 说 “ 大家 在 同一个 标准 下 开发 ， Apusic 和 IBM 、 BEA 的 产品 没什么 本质区别 ” 、 对于 这句 话 ， 你 今天 能否 再 解释一下 ？ 　 　 袁红岗 ： 这个 问题 其实 不 需要 证明 ， 没有 人 认为 神舟 飞船 和 阿波罗 飞船 在 本质 上 有 什么 区别 ， 都 是 为 载人 航天 而 制造 出来 的 工具 ， 并 不会 因为 一个 是 中国 制造 、 另 一个 是 美国 制造 ， 在 用途 上 就 存在 什么 区别 。 诚然 ， 我们 和 国外 产品 还 存在 一些 差距 ， 但 在 J2EE 标准 框架 之下 ， 我们 提供 了 完全 可 供 用户 使用 的 产品 ， 用户 的 选择 是 对 我们 产品 最大 的 肯定 。 中国 软件 起步 较晚 ， 基础 较 薄弱 ， 但 在 中间件 领域 我们 是 及时 跟进 的 ， 当时 站 在 同 一条 起跑线 上 ， 现在 仍然 没有 被 淘汰 出局 ， 相反 差距 还 在 逐步 缩小 。 我 相信 凭 我们 的 技术实力 ， 我们 完全 有 资格 和 国外 产品 同台 竞技 。 　 　 记者 ： 许多 技术人员 都 反映 Apusic 的 启动 速度 非常 快 ， 很快 就 启动 了 ， 和 同类产品 相比 非常 突出 。 看来 使用者 们 对 它 快速 启动 的 特点 非常 喜爱 。 据 我 了解 ， Apusic 的 代码 只是 其它 产品 的 几分 之一 ， 是因为 这个 原因 吗 ？ 你 设计 时 是 怎么 想 的 ？ 　 　 袁红岗 ： 很多 人 不 理解 ， 为什么 Apusic 和 其他 产品 比 起来 代码 规模 上要 小 很多 ， 但 使用 起来 并 没有 感觉 到 有 什么 功能 缺失 呢 ？ 这里 要 涉及 到 软件 使用 上 的 一个 “ 二八 原则 ” ， 即 80 % 的 使用者 通常 只会 用到 一个 软件 20 % 的 功能 。 象 微软 的 产品 个个 都 是 巨无霸 ， 但 对 某个 产品 真正 做到 完全 精通 的 可以 说 寥寥无几 。 以 Word 为例 ， 平时 我们 只是 用 它 来 写写 文档 ， 很多 高级 功能 其实 根本 用不上 。 在 Apusic 应用服务器 的 开发 上 我们 也 是 遵循 同样 的 原则 ， 我们 将 尽可能 地 将 整个 软件产品 最 重要 的 20 % 的 功能 做好 、 做 完善 ， 以 保证 大多数 用户 的 需求 ， 剩下 的 80 % 功能 将 根据 需要 逐步 增加 。 　 　 譬如 国外 产品 很 早就 有 的 集群 功能 我们 最近 才 推出 来 ， 并 不是 我们 没有 能力 实现 集群 功能 ， 而是 在 我们 看来 ， 集群 并 不是 解决 性能 问题 的 最好 方案 ， 只有 在 真正 大 并发 请求 下 集群 才 会 展现 它 的 优势 。 因此 ， 我们 把 集群 功能 归结为 低优先级 需求 ， 只有 在 其他 方面 的 性能 和 稳定性 有 了 很大 提高 后 再 来 考虑 集群 。 　 　 另 一个 使 Apusic 运行 轻便 的 重要 原因 在于 软件架构 的 设计 。 架构 是 一个 软件 的 灵魂 ， 好 的 架构 将 延长 软件 的 生命力 ， 轻松 应付 各种 变化 。 Apusic 的 架构 在 2001 年 时 就 已 定型 ， 以 微内核 和 多路复用 为 其 核心 ， 历经 产品 多次 重大 升级 而 未 影响 核心 体系 ， 展现 了 顽强 的 生命力 。 相反 ， 如果 架构设计 不合理 ， 每次 升级 都 要 对 架构 进行 调整 ， 势必 引入 大量 冗余 代码 ， 使 整个 产品 臃肿 不堪 。 　 　 第三个 原因 在于 代码 编写 的 简洁性 上 。 莎士比亚 有 一句 名言 ： “ 简洁 是 智慧 的 灵魂 ” ， 在 科学界 同样 也 推崇 简洁性 ， 麦克斯韦 方程组 简洁 深刻 ， 被誉为 是 上帝 谱写 的 诗歌 ， 爱因斯坦 的 著名 公式 E = mc ^ 2 更是 将 简洁性 发挥 到 了 极致 。 程序设计 语言 不仅仅 是 为 计算机 运行 而 设计 的 ， 它 也 是 一种 思想 表达 工具 ， 甚至 比 自然语言 更 简洁 、 深刻 、 无 歧义 。 我 平时 很少 写 文档 ， 因为 我 认为 代码 本身 就 已经 表达 了 作者 的 思想 。 当 我 看到 简洁 优美 的 代码 时 ， 我 认为 是 在读 一篇 美丽 的 诗篇 ， 并 为 作者 深邃 奔放 的 思想 所 折服 。 相反 ， 当 看到 混乱 、 繁复 而 无 章法 的 代码 时 ， 我 相信 作者 的 思想 同样 是 混乱 的 。 　 　 记者 ： 去年 你 曾 预言 J2EE 正在 迎来 一次 划时代 的 变革 ， 关键词 是 EJB ， 对此 你 能 再 做 一次 阐述 吗 ？ 　 　 袁红岗 ： J2EE 可以 说 是 这 几年 发展 非常 快速 的 一个 应用 开发 平台 ， 这 和 Java 这种 灵活 、 方便 、 开放 、 跨平台 的 语言 具有 不可 分隔 的 联系 。 Java 是 一个 讲求 实用 的 语言 ， 所有 对 应用 开发 有用 的 特性 都 被 吸收 进来 ， 成为 Java 平台 的 一部分 ， 而 那些 花 稍 但 无 实际 作用 的 特性 被 摒弃 。 Java 的 类库 丰富 、 开发 社区 完善 等 特色 标志 着 它 还 将 在 相当 长 的 时期 内 保持 旺盛 的 生命力 。 　 　 J2EE 可以 说 是 在 Java 平台 中 应用 最为 广泛 的 技术 ， 而且 正在 逐步 走向 成熟 。 JCP 组织 在 总结 了 过去 J2EE 实践 中 的 经验 和 教训 ， 在 将来 的 Java   EE   5.0 规范 中将 对 J2EE 技术 做 一个 相当 大 的 调整 ， 其中 最受 影响 的 就是 EJB 规范 。 过去 EJB 给 人 的 感觉 过重 ， 而且 开发 过程 复杂 ， 不易 维护 ， 因此 在 实际 项目 中 使用 EJB 的 很少 。 在 EJB3 中 ， EJB 的 开发方法 将 彻底改变 ， 不再 使用 Home ，   Remote 接口 等 概念 ， 而 采取 轻量级 的 开发 模式 ， 以 Java   5.0 中 引进 的 annotation 作为 EJB 描述 工具 ， 特别 是 实体 Bean 的 角色 将 被 重新 定位 ， 使 其 单纯 担负起 O / R   Mapping 的 作用 。 所有 这些 举措 都 是 为了 使 EJB 的 开发 过程 更加 简单 、 效率 更高 、 维护 更 方便 。 　 　 在 Web 开发 方面 ， Java   EE   5 增加 了 新 的 JSF 规范 ， 这是 一个 类似 于 struts 之类 的 web 开发 框架 ， 但 比 它们 更 方便 。 JSF 基于 事件 及 UI 组件 模型 的 开发方式 颠覆 了 传统 的 web 开发 习惯 ， 结合 开发工具 的 支持 ， 将 使 其 更 接近 于 一个 真正 的 MVC 编程 环境 。 使用 JSF 开发 表现 层 现在 看起来 更象 swing 编程 ， 基于 UI 组件 的 模型 能够 把 web 界面 定制 的 很多 工作 独立 出来 ， 厂商 可以 针对 具体 的 目标 定制 更多更好 用 的 组件 。 而 我们 作为 国产 中间件 厂商 ， 比 国外 厂商 理应 更 了解 国内 客户 的 需求 ， 因此 我们 的 应用 开发 平台 Apusic   Studio 将 成为 以 JSF 为 基础 的 一个 强大 的 web 应用 开发 平台 。 　 　 记者 ： 现在 很多 应用 已经 转移 到 所谓 的 轻量级 J2EE 方案 上去 了 ， 比如 Spring ， 已经 红 了 快 两年 了 。 现在 才 推出 Java   EE   5.0 是不是 来得 太 晚些 了 ？ 怎样 预期 Java   EE 对于 整个 产业 的 影响 ？ 　 　 袁红岗 ： 在 我们 主办 的 “ Java 俱乐部 ” 地面 活动 上 ， 也 有 技术 爱好者 问及 我 这个 问题 ， 当时 我 回答 到 “ 非官方 和 官方 互相促进 ， Java   EE   5.0 来得 并 不晚 ” 。 　 　 开源 社区 （ 往往 是 非官方 标准 ） 代表 的 经常 是 理想主义者 ， 而 商业 公司 （ 往往 是 官方 标准 ） 代表 的 经常 是 现实主义者 。 两者之间 有 相互竞争 的 地方 ， 但 从 长远 来看 ， 更 多 的 是 一种 是 相互 补充 、 相互促进 的 过程 。 　 　 Spring 及 Hibernate 等 开源 框架 ， 已经 对 Java   EE 的 技术 发展趋势 产生 了 非常 重大 的 影响 。 或者说 Java   EE 的 发展 ， 也 借鉴 并 吸取 了 这些 开源 框架 的 一些 优秀 的 思想 。 从 技术 层面 来看 ， 这 反而 会 使 Java 　 EE 具有 一定 的 后发优势 ； 同时 ， 这些 新 技术 在 业界 的 广泛 使用 ， 总是 需要 一定 的 周期 ， 并且 ， 采用 Java 　 EE 构建 业务 系统 的 最终用户 ， 也 总是 希望 能够 获得 诸多 厂商 的 官方 支持 与 商业 标准 。 因此 ， 从 这些 方面 来看 ， Java   EE   5.0   来得 其实 并 不晚 。 至于 Java   EE 对于 整个 产业 的 影响 ， 可能 是 J2EE 这个 概念 自 诞生 以来 比较 重量级 的 一次 震撼 。 它 所 带来 的 影响 是 深远 的 （ 更 多 的 表现 在 对 J2EE 开发 过程 的 影响 ） ， 但 用户 自 1.4 平台 向 5.0 平台 之上 的 迁移 ， 却是 平缓 的 。 　 　 记者 ： 有人 曾 说 ， 国产 中间件 的 出路 是 专注 于 某个 产品 、 用 单一化 的 差异 优势 竞争 。 以前 同样 有人 讲 APUSIC 产品线 单一 ， 但 现在 我 听说 你们 马上 要 推出 消息中间件 和 开发 平台 ， 在 这里 你 能否 对 这 两种 产品 作 一点 介绍 ？ 　 　 袁红岗 ： 过去 我们 的 产品线 是 比较 单一 ， 仅 有 一个 应用服务器 产品 ， 这次 我们 推出 了 Apusic   MQ 和 Apusic   Studio 这 两个 产品 ， 使 产品线 有 了 很大 的 扩充 ， 形成 一个 相对 比较 完整 的 Apusic   Platform 产品 家族 。 在 这个 产品 家族 中 Apusic   Studio 将 扮演 一个 非常 重要 的 角色 。 我们 知道 ， 各 厂商 的 应用服务器 产品 都 是 大同小异 的 ， 用户 主要 根据 性能 、 易用性 、 售后服务 等 指标 来 进行 选择 。 但是 仅 有 应用服务器 产品 是 不够 的 ， 还 需要 一个 好 的 开发工具 来 支持 。 过去 我们 就 深受 缺少 开发工具 的 困扰 ， 很多 用户 其实 很 喜欢 Apusic 应用服务器 ， 觉得 用 起来 很 不错 ， 但 开发 起来 太 麻烦 ， 甚至 有人 先 在 其他 平台 上 开发 ， 等 开发 完 了 再 移植 过来 ， 这种 困扰 多少 打击 了 一部分 开发人员 的 积极性 。 　 　 在 Apusic   Studio 立项 会议 上 ， 我们 一 开始 是 想 为 JBuilder 、 Eclipse 等 写 一些 插件 ， 利用 第三方 开发工具 来 支持 Apusic 的 开发 ， 但 我们 最终 抛弃 了 这 一 想法 ， 决定 搞 一个 和 Apusic 应用服务器 紧密结合 的 ， 更 接近 于 应用 开发 的 平台 。 金蝶 集团 具有 十几年 的 应用 开发 历史 ， 积累 了 大量 的 经验 和 教训 ， 在 这样 的 基础 上 ， 我们 更 应该 秉承 “ 帮助 客户 成功 ” 的 集团 宗旨 ， 不仅 向 用户 提供 一个 方便 、 高效 的 开发工具 ， 更 重要 的 是 要 在 产品 中 和 用户 分享 金蝶 的 应用 开发 经验 ， 以 开发 思想 、 开发 模式 、 开发工具 、 应用 组件 等 全方位 的 开发 平台 提供 给 客户 。 　 　 Apusic   Studio 以 Eclipse 为 基础 ， 不仅 具有 大多数 J2EE 开发工具 所 应当 具有 的 功能 ， 还 提供 了 以 XP 方法 为 代表 的 轻量级 开发 方面 的 工具 ， 另外 ， 我们 还 提供 了 一些 现成 的 组件 ， 以 帮助 用户 快速 构建 应用 系统 。 我们 知道 ， 在 J2EE 规范 中 ， 将 一个 应用 的 开发 分解成 若干个 角色 ， 包括 开发 、 配置 、 部署 、 管理 等 ， 但 实际上 ， 部署 、 配置 、 管理 等 阶段 ， 都 是 开发 过程 中 必不可少 的 一个 阶段 。 那么 ， 怎么 把 这些 阶段 有机 的 集成 在 一起 呢 ？ Apusic   Studio 就是 这样 一个 统一 的 开发 平台 ， 它 基于 Eclipse 技术 ， 通过 与 Apusic 应用服务器 的 紧密 集成 ， 给 开发人员 提供 了 一个 轻量级 的 J2EE 开发 平台 。 　 　 记者 ： 最后 一个 问题 说点 轻松 的 ， 国内 很多 程序员 都 曾 看过 你 那 篇 创下 点击 几十万 的 牛 帖 《 程序员 的 几个 基本 原则 》 ， 那么 现实生活 中 你 真是 这样 生活 的 吗 ？ 比如 写累 了 休息 时 疯狂 打 暴力 游戏 ？ 　 　 袁红岗 ： 娱乐 是 为了 更好 的 工作 ， 一个 不 懂得 娱乐 的 程序员 不是 一个 好 程序员 。 　 　